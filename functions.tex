\ExplSyntaxOn
\file_if_exist:nF
  { ./functions.generated.tex }
  {
    \file_if_exist:nF
      { ./files.txt }
      {
        \sys_shell_now:n
          {
            % Find all expl3 files.
            find~/usr/local/texlive/~-type~f~-iregex~'.*\.\(tex\|cls\|opt\|sty\)$'~>~files.txt
          }
      }
    % Process all expl3 files and create a LaTeX source file listing all functions and where they are defined.
    \lua_load_module:n
      { functions }
  }
\ExplSyntaxOff
% Typeset the LaTeX source file.
\documentclass{article}
\setcounter{secnumdepth}{0}
\setcounter{tocdepth}{1}
\usepackage{fontspec}
\usepackage[xindy]{imakeidx}
\makeindex[intoc, name=functions, title=function index, columns=1]
\makeindex[intoc, name=files, title=file index, columns=2]
\indexsetup{othercode=\small}
\ExplSyntaxOn
\cs_new:Npn
  \cs
  #1
  {
    \texttt
      {
        \textbackslash
        \tl_to_str:n
          { #1 }
      }
  }
\cs_set_eq:NN
  \filename
  \tl_to_str:n
\ExplSyntaxOff
\renewcommand{\abstractname}{abstract}
\renewcommand{\contentsname}{contents}
\newcommand\lettergroup[1]{%
  \par\textbf{\MakeLowercase{#1}}\par
  \nopagebreak
}
\usepackage{hyperref}
\title{(almost) all expl3 functions}
\author{vít starý novotný}
\date{july 8, 2025}
\begin{document}
\maketitle
\begin{abstract}
this document uses the expltools bundle to generate a list of (almost) all
expl3 functions defined in current tex live
\end{abstract}
\tableofcontents
\section{function list}
\input functions.generated.tex
\printindex[functions]
\printindex[files]
\end{document}
